<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>TimeLink - Panel</title>

  <!-- FullCalendar JS-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>


  <!-- CSS separado -->
  <link rel="stylesheet" href="../main/mainApp.css">

    <!-- chart JS -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>

  <!-- SIDEBAR -->
  <aside class="sidebar">
    
    <div>
      <!-- Info usuario -->
      <div class="user-info">
        <div id="sidebarAvatar"></div>
        <h2 id="userName">Usuario</h2>
        <p id="userEmail">correo@example.com</p>
      </div>

      <!-- MENÃš PRINCIPAL -->
      <div class="menu">

        <button onclick="navigate('inicio')" id="btnInicio" class="active">ğŸ  Inicio</button>
        <button onclick="navigate('calendario')" id="btnCalendario">ğŸ“… Calendario</button>
        <button onclick="navigate('clientes')" id="btnClientes">ğŸ‘¤ Clientes</button>
        <button onclick="navigate('citas')" id="btnCitas">ğŸ“ Citas</button>
        <button onclick="navigate('ajustes')" id="btnAjustes">âš™ï¸ Ajustes</button>

        <!-- Panel Admin visible SOLO trabajadores (como tenÃ­as) -->
        <button onclick="navigate('adminPanel')" id="adminPanelBtn" style="display:none;">
            â­ Panel Admin
        </button>

        <!-- SubmenÃº solo admin -->
        <div id="submenuAdminContainer" style="display:none; margin-top:15px;">

            <button class="menu-btn admin-toggle" id="adminToggleBtn">
                âš™ï¸ AdministraciÃ³n avanzada â–¾
            </button>

            <div id="adminSubmenu" class="submenu-admin">
                <button class="submenu-item" onclick="navigate('empresas')" id="btnEmpresas">ğŸ¢ Empresas</button>
                <button class="submenu-item" onclick="navigate('trabajadores')" id="btnTrabajadores">ğŸ‘¥ Trabajadores</button>
            </div>

        </div>

      </div> <!-- FIN MENU -->

    </div>

    <!-- LOGOUT -->
    <div class="menu">
        <button onclick="logout()">ğŸšª Cerrar SesiÃ³n</button>
    </div>

  </aside>

  <!-- MAIN CONTENT -->
  <div class="main" id="mainContent">
      <h1>Bienvenido ğŸ‘‹</h1>
      <p>AquÃ­ irÃ¡ el contenido dinÃ¡mico.</p>
  </div>

  <!-- POPUP CITAS -->
  <div id="popupCita">
    <div class="popup-card">
      <h2 id="popupTitulo">Nueva cita</h2>

      <label>Cliente:</label>
      <input id="citaCliente" type="text" placeholder="Nombre del cliente">

      <label>TelÃ©fono:</label>
      <input id="citaTelefono" type="text" placeholder="TelÃ©fono">

      <label>Nota:</label>
      <textarea id="citaNota" placeholder="Notas"></textarea>

      <div class="popup-actions">
        <button id="cancelarPopup">Cancelar</button>
        <button id="guardarPopup">Guardar</button>
      </div>
    </div>
  </div>

  <!-- POPUP EMPRESA -->
  <div id="popupEmpresa" class="popup-overlay" style="display:none;">
    <div class="popup-card empresa-card-popup">
      <h2>Nueva EMPRESA</h2>

      <label>Nombre de la empresa:</label>
      <input id="empNombre" type="text" placeholder="Ej: BarberÃ­a El Corte">

      <label>DirecciÃ³n:</label>
      <input id="empDireccion" type="text" placeholder="DirecciÃ³n (opcional)">

      <label>TelÃ©fono:</label>
      <input id="empTelefono" type="text" placeholder="TelÃ©fono (opcional)">

      <label>Imagen de empresa:</label>
      <input id="empImagen" type="file" accept="image/*">

      <div class="popup-actions">
        <button id="cancelarEmpresaPopup">Cancelar</button>
        <button id="guardarEmpresaPopup">Guardar</button>
      </div>
    </div>
  </div>

  <!-- POPUP VISUALIZAR EMPRESA -->
  <div id="popupEmpresaView" class="popup-overlay">
    <div class="popup-card empresa-view-card">

      <button id="empresaViewClose" class="close-btn"> x </button>

      <img id="empresaViewImg" class="empresa-view-img"><br>

      <h2 id="empresaViewNombre"></h2>
      <p id="empresaViewDireccion"></p>
      <p id="empresaViewTelefono"></p>

      <br>

      <button id="empresaEditBtn" class="btn-primary">Editar empresa</button>
      <button id="borrarEmpresaPreview" class="btn-danger">Eliminar</button>


    </div>
  </div>

  <!-- POPUP CREAR / EDITAR TRABAJADOR -->
  <div id="popupTrabajador" class="popup-overlay">
    <div class="popup-card empresa-edit-card">

      <h2 id="popupTrabajadorTitulo">Nuevo TRABAJADOR</h2>

      <label>Foto de perfil:</label>
      <input id="trImagen" type="file" accept="image/*">

      <label>Nombre:</label>
      <input id="trNombre" type="text" placeholder="Nombre del trabajador">

      <label>Email:</label>
      <input id="trEmail" type="email" placeholder="Email del trabajador">

      <label>Empresa asignada:</label>
      <select id="trEmpresaSelect"></select>

      <div class="popup-actions">
        <button id="cancelarTrabajadorPopup" class="btn-secondary">Cancelar</button>
        <button id="guardarTrabajadorPopup" class="btn-primary">Guardar</button>
      </div>

    </div>
  </div>

  <!-- POPUP VISUALIZAR TRABAJADOR -->
  <div id="popupTrabajadorView" class="popup-overlay">
    <div class="popup-card empresa-view-card">

      <button id="trViewClose" class="close-btn">âœ–</button>

    <div id="trViewImgContainer"></div>

      <h2 id="trViewNombre"></h2>
      <p id="trViewEmail"></p>
      <p id="trViewEmpresa"></p>
      
      <br>

      <button id="trEditarBtn" class="btn-primary">Editar trabajador</button>
      <button id="borrarTrabajadorPreview" class="btn-danger">Eliminar</button>

    </div>
  </div>

  <!-- JS separado -->
  <script defer src="../main/renderer1.js"></script>

</body>

</html>